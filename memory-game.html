<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Flip - GameVault</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0f0f1a;
            color: #e1e5e9;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: #1a1a2e;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            border-bottom: 2px solid #16213e;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00d4ff;
        }

        .back-btn {
            background: #2a2a3e;
            color: #e1e5e9;
            padding: 0.6rem 1.2rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            font-weight: 500;
        }

        .back-btn:hover {
            background: #3a3a4e;
        }

        /* Main Container */
        .container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        .game-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 2rem;
            color: #ffffff;
        }

        /* Game Controls */
        .controls {
            background: #1e1e2f;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
            border: 2px solid #2a2a3e;
        }

        .controls-row {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
            justify-content: center;
        }

        .control-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .control-group label {
            color: #a0a6b0;
            font-size: 0.9rem;
        }

        .control-group select {
            background: #2a2a3e;
            color: #e1e5e9;
            border: 1px solid #3a3a4e;
            padding: 0.5rem;
            border-radius: 6px;
            cursor: pointer;
        }

        .new-game-btn {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: white;
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 212, 255, 0.3);
        }

        .new-game-btn:hover {
            background: linear-gradient(45deg, #0099cc, #00d4ff);
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .stat {
            background: #1e1e2f;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            border: 2px solid #2a2a3e;
            text-align: center;
            min-width: 100px;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #00d4ff;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #a0a6b0;
            margin-top: 0.3rem;
        }

        /* Game Board */
        .game-board {
            display: grid;
            gap: 1rem;
            margin: 0 auto;
            max-width: 600px;
            padding: 2rem;
            background: #1e1e2f;
            border-radius: 10px;
            border: 2px solid #2a2a3e;
        }

        .game-board.grid-4 {
            grid-template-columns: repeat(4, 1fr);
        }

        .game-board.grid-6 {
            grid-template-columns: repeat(6, 1fr);
        }

        /* Card Styles */
        .card {
            aspect-ratio: 1;
            background: #2a2a3e;
            border: 2px solid #3a3a4e;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            transition: all 0.3s ease;
            user-select: none;
        }

        .card:hover:not(.flipped):not(.matched) {
            background: #3a3a4e;
            border-color: #00d4ff;
        }

        .card.flipped {
            background: #16213e;
            border-color: #00d4ff;
        }

        .card.matched {
            background: #1a3a2e;
            border-color: #00ff88;
            opacity: 0.6;
            cursor: default;
        }

        .card-front {
            display: none;
        }

        .card.flipped .card-front,
        .card.matched .card-front {
            display: block;
        }

        .card:not(.flipped):not(.matched) .card-front {
            display: none;
        }

        .card:not(.flipped):not(.matched)::before {
            content: '?';
            color: #00d4ff;
            font-size: 2.5rem;
            font-weight: bold;
        }

        /* Game Message */
        .game-message {
            text-align: center;
            padding: 1rem;
            margin: 2rem auto;
            max-width: 600px;
            border-radius: 8px;
            font-weight: 600;
            display: none;
        }

        .game-message.show {
            display: block;
        }

        .game-message.win {
            background: #1a3a2e;
            color: #00ff88;
            border: 2px solid #00ff88;
        }

        /* Start Screen */
        .start-screen {
            text-align: center;
            padding: 3rem;
            background: #1e1e2f;
            border-radius: 10px;
            border: 2px solid #2a2a3e;
        }

        .start-screen h2 {
            color: #00d4ff;
            margin-bottom: 1rem;
        }

        .start-screen p {
            color: #a0a6b0;
            margin-bottom: 2rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .game-board {
                padding: 1rem;
                gap: 0.7rem;
            }

            .card {
                font-size: 1.5rem;
            }

            .card:not(.flipped):not(.matched)::before {
                font-size: 2rem;
            }

            .stats-bar {
                gap: 0.5rem;
            }

            .stat {
                padding: 0.7rem 1rem;
                min-width: 80px;
            }

            .stat-value {
                font-size: 1.4rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">üéÆ GameVault</div>
        <a href="index.html" class="back-btn">‚Üê Back to Home</a>
    </header>

    <!-- Main Container -->
    <div class="container">
        <h1 class="game-title">üß† Memory Flip Cards</h1>

        <!-- Game Controls -->
        <div class="controls">
            <div class="controls-row">
                <div class="control-group">
                    <label>Grid:</label>
                    <select id="gridSize">
                        <option value="4">4x4</option>
                        <option value="6">6x6</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Theme:</label>
                    <select id="cardTheme">
                        <option value="emoji">Emojis</option>
                        <option value="number">Numbers</option>
                        <option value="letter">Letters</option>
                    </select>
                </div>
                <button class="new-game-btn" onclick="game.startNewGame()">New Game</button>
            </div>
        </div>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat">
                <div class="stat-value" id="movesCount">0</div>
                <div class="stat-label">Moves</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="matchesCount">0</div>
                <div class="stat-label">Matches</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="timerCount">00:00</div>
                <div class="stat-label">Time</div>
            </div>
        </div>

        <!-- Game Message -->
        <div id="gameMessage" class="game-message"></div>

        <!-- Game Board -->
        <div id="gameBoard" class="game-board grid-4">
            <div class="start-screen">
                <h2>Ready to Play?</h2>
                <p>Click "New Game" to start matching cards!</p>
            </div>
        </div>
    </div>

    <script>
        // Constructor function for Card
        function Card(id, value) {
            this.id = id;
            this.value = value;
            this.isFlipped = false;
            this.isMatched = false;
        }

        // Game Class
        class MemoryGame {
            constructor() {
                this.cards = [];
                this.flippedCards = [];
                this.moves = 0;
                this.matches = 0;
                this.totalPairs = 0;
                this.isPlaying = false;
                this.startTime = null;
                this.timerInterval = null;
            }

            startNewGame() {
                const gridSize = parseInt(document.getElementById('gridSize').value);
                const theme = document.getElementById('cardTheme').value;
                
                this.totalPairs = (gridSize * gridSize) / 2;
                this.moves = 0;
                this.matches = 0;
                this.flippedCards = [];
                this.isPlaying = true;
                this.startTime = Date.now();

                this.cards = this.generateCards(this.totalPairs, theme);
                this.renderBoard(gridSize);
                this.updateStats();
                this.hideMessage();
                this.startTimer();
            }

            generateCards(pairs, theme) {
                const themes = {
                    emoji: ['üéÆ', 'üéØ', 'üé®', 'üé™', 'üé≠', 'üé∏', 'üé∫', 'üéπ', 'üé≤', 'üé≥', '‚öΩ', 'üèÄ', 'üéæ', 'üèê', 'üé±', 'üèì', 'üéø', '‚õ∑Ô∏è'],
                    number: Array.from({length: 50}, (_, i) => i + 1),
                    letter: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('')
                };

                const values = themes[theme].sort(() => Math.random() - 0.5).slice(0, pairs);
                const cardPairs = [];

                values.forEach((value, index) => {
                    cardPairs.push(new Card(index * 2, value));
                    cardPairs.push(new Card(index * 2 + 1, value));
                });

                return cardPairs.sort(() => Math.random() - 0.5);
            }

            renderBoard(gridSize) {
                const board = document.getElementById('gameBoard');
                board.className = `game-board grid-${gridSize}`;
                board.innerHTML = '';

                this.cards.forEach(card => {
                    const cardEl = document.createElement('div');
                    cardEl.className = 'card';
                    cardEl.dataset.id = card.id;
                    
                    const front = document.createElement('div');
                    front.className = 'card-front';
                    front.textContent = card.value;
                    cardEl.appendChild(front);

                    cardEl.addEventListener('click', () => this.handleCardClick(card.id));
                    board.appendChild(cardEl);
                });
            }

            handleCardClick(cardId) {
                if (!this.isPlaying || this.flippedCards.length >= 2) return;

                const card = this.cards.find(c => c.id === cardId);
                if (!card || card.isFlipped || card.isMatched) return;

                card.isFlipped = true;
                this.flippedCards.push(card);
                this.updateCardDisplay(cardId);

                if (this.flippedCards.length === 2) {
                    this.moves++;
                    this.updateStats();
                    setTimeout(() => this.checkMatch(), 600);
                }
            }

            checkMatch() {
                const [card1, card2] = this.flippedCards;

                if (card1.value === card2.value) {
                    card1.isMatched = true;
                    card2.isMatched = true;
                    this.matches++;
                    this.updateCardDisplay(card1.id);
                    this.updateCardDisplay(card2.id);
                    
                    if (this.matches === this.totalPairs) {
                        this.endGame();
                    }
                } else {
                    card1.isFlipped = false;
                    card2.isFlipped = false;
                    this.updateCardDisplay(card1.id);
                    this.updateCardDisplay(card2.id);
                }

                this.flippedCards = [];
                this.updateStats();
            }

            updateCardDisplay(cardId) {
                const card = this.cards.find(c => c.id === cardId);
                const cardEl = document.querySelector(`[data-id="${cardId}"]`);
                
                if (!cardEl) return;

                cardEl.className = 'card';
                if (card.isFlipped) cardEl.classList.add('flipped');
                if (card.isMatched) cardEl.classList.add('matched');
            }

            updateStats() {
                document.getElementById('movesCount').textContent = this.moves;
                document.getElementById('matchesCount').textContent = this.matches;
            }

            startTimer() {
                if (this.timerInterval) clearInterval(this.timerInterval);
                
                this.timerInterval = setInterval(() => {
                    if (!this.isPlaying) return;
                    
                    const elapsed = Math.floor((Date.now() - this.startTime) / 1000);
                    const minutes = Math.floor(elapsed / 60);
                    const seconds = elapsed % 60;
                    
                    document.getElementById('timerCount').textContent = 
                        `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }, 1000);
            }

            endGame() {
                this.isPlaying = false;
                clearInterval(this.timerInterval);
                
                const finalTime = Math.floor((Date.now() - this.startTime) / 1000);
                const accuracy = Math.round((this.matches / this.moves) * 100);
                
                this.showMessage(`üéâ You Won! Time: ${Math.floor(finalTime/60)}:${(finalTime%60).toString().padStart(2,'0')} | Moves: ${this.moves} | Accuracy: ${accuracy}%`, 'win');
                
                this.saveToHistory({
                    date: new Date().toISOString(),
                    moves: this.moves,
                    matches: this.matches,
                    time: finalTime,
                    accuracy: accuracy,
                    score: Math.round(accuracy * (this.totalPairs / (finalTime / 60)))
                });
            }

            saveToHistory(gameData) {
                try {
                    const history = JSON.parse(localStorage.getItem('memoryGameHistory') || '[]');
                    history.unshift(gameData);
                    
                    if (history.length > 10) {
                        history.splice(10);
                    }
                    
                    localStorage.setItem('memoryGameHistory', JSON.stringify(history));
                } catch (error) {
                    console.error('Failed to save game:', error);
                }
            }

            showMessage(text, type) {
                const msg = document.getElementById('gameMessage');
                msg.textContent = text;
                msg.className = `game-message ${type} show`;
            }

            hideMessage() {
                document.getElementById('gameMessage').className = 'game-message';
            }
        }

        // Initialize game
        const game = new MemoryGame();
    </script>
</body>
</html>